<p style="color: green"><%= notice %></p>

<head>
	<%= stylesheet_link_tag "styles.css" %>
</head>

<%= render "/navbar"%>
  
<p class="bannerBox"></p>

<mainContentHolder>

<%= link_to "Back to set list", wakeboard_sets_path %>

<%= render @wakeboard_set %>

<% if SetRider.rider_exists?(current_admin.id, @wakeboard_set.id) %>
  <div>
    <%= button_to "Leave Set", leave_wakeboard_set_path %>
  </div>
<% else %>
  <div style="display: flex;">
    <%= button_to "Join as Dib", join_wakeboard_set_path, params: { as_dib: true }, method: :post, disabled: !@joinable %>
    <%= button_to "Join as Chib", join_wakeboard_set_path, params: { as_dib: false }, method: :post, disabled: !@joinable %>
  </div>
<% end %>

<br>

<div>
  <h2>Current Riders</h2>

  <div style="display: flex; flex-direction: row; justify-content: center;">
	<div style="margin: 0 1.5rem;">
      <h3 style="text-align: center">Drivers</h3>
      <table id="driver-table">
        <% @drivers.each do |driver| %>
          <% i = 1%>
          <tr>
            <td><%=driver.first_name + " " + driver.last_name %></td>
          </tr>
          <% i += 1%>
        <% end %>
      </table>
    </div>
	
    <div style="margin: 0 1.5rem;">
      <h3 style="text-align: center">Dibs</h3>
      <table id="dib-table">
        <% (@riders.select {|r| r.as_dib}).each do |rider| %>
          <% i = 1%>
          <tr>
            <td><%=rider.first_name + " " + rider.last_name %></td>
          </tr>
          <% i += 1%>
        <% end %>
      </table>
    </div>

    <div style="margin: 0 1.5rem;">
      <h3 style="text-align: center">Chibs</h3>
      <table id="chib-table">
        <% (@riders.select {|r| !r.as_dib}).each do |rider| %>
          <tr>
            <td><%=  rider.first_name + " " + rider.last_name %></td>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>

<br>

<%# 
  only render delete/edit options if the user has 
  admin permissions or is a driver
%>
<% if current_admin.id == 1 %>
  <div>
    <%= link_to "Edit set", edit_wakeboard_set_path(@wakeboard_set) %>
    <%= button_to "Delete this set", @wakeboard_set, method: :delete %>
  </div>
<% end %>

</mainContentHolder>